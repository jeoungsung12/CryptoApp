//
//  CoinChartView.swift
//  CryptoApp
//
//  Created by 정성윤 on 3/7/25.
//

import SwiftUI
import Charts

final class CoinChartHostingView: UIHostingController<CoinChartView> { }

struct CoinChartView: View {
    @State var chartData: [Double]
    var body: some View {
        Chart {
            ForEach(chartData.indices, id: \.self) { (index) in
                LineMark(x: .value("Date", index), y: .value("Value", chartData[index]))
                    .interpolationMethod(.cardinal)
                
                AreaMark(x: .value("Date", index), y: .value("Value", chartData[index]))
                    .interpolationMethod(.cardinal)
                    .foregroundStyle(
                        LinearGradient(
                            gradient: Gradient(colors: [Color.blue.opacity(0.8), Color.white.opacity(0.3)]),
                            startPoint: .top,
                            endPoint: .bottom
                        )
                    )
            }
        }
        .chartXAxis(.hidden)
        .chartYAxis(.hidden)
    }
}

#Preview {
    CoinChartView(chartData: [
        0.42403105541287184,
        0.4185213929465291,
        0.42549782371276956,
        0.43042474284406207,
        0.4254758794800462,
        0.42429860752159376,
        0.4260482754116178,
        0.43456303557586773,
        0.43741549861516077,
        0.4439888164034991,
        0.44766001249054765,
        0.4494327159977654,
        0.4566329304837129,
        0.4519271528650883,
        0.4487010561600781,
        0.4485874062232769,
        0.4422785698776251,
        0.44346222315756373,
        0.4380015730296375,
        0.4487618340977453,
        0.445377148201595,
        0.4465212081722147,
        0.4512304455658838,
        0.44628738290723674,
        0.44449216251558676,
        0.44149104206696044,
        0.4404759235250208,
        0.4401959119358745,
        0.4348952663095551,
        0.43376139670922564,
        0.43606394073662164,
        0.430251789918371,
        0.4315173499954702,
        0.4309536933404835,
        0.431771805708574,
        0.43331734261079496,
        0.43432779279272815,
        0.43607414534296085,
        0.43732409813183376,
        0.44592769266543675,
        0.44758882603425626,
        0.4451690310303865,
        0.44132459506431515,
        0.43943659196944573,
        0.43838874730510247,
        0.4385963311786031,
        0.44232303370337395,
        0.44282111711710453,
        0.443623550523619,
        0.4449961872205914,
        0.4488453909130678,
        0.44782120057478964,
        0.4492902099958569,
        0.44800216752615013,
        0.4474624682981887,
        0.4439228614437459,
        0.4402378315854415,
        0.4535659828986318,
        0.48346447624085437,
        0.5245093613350326,
        0.5325916170365594,
        0.5449366345338058,
        0.5414405000625008,
        0.5348651156666192,
        0.5382915692191832,
        0.5294975306383758,
        0.5106180560172001,
        0.5081942578634062,
        0.5005699386860192,
        0.49724214761114005,
        0.4984158276121886,
        0.49936508459918777,
        0.4850920206122172,
        0.4881167298985468,
        0.4742481978323038,
        0.47207585038918465,
        0.47743230222653615,
        0.47827232247292845,
        0.4788876481743162,
        0.4793285273739798,
        0.46472261091328154,
        0.4635515350492917,
        0.4639160609938882,
        0.4602934088369054,
        0.4411094328329301,
        0.4268026073704567,
        0.42540215124890174,
        0.4176744758861154,
        0.4238928908132316,
        0.422361530388085,
        0.4148620579587002,
        0.3990106956257132,
        0.3980267870179394,
        0.4003091700533071,
        0.39789858782449516,
        0.4004248634125732,
        0.4016594084239403,
        0.3954212003659722,
        0.3974757558533511,
        0.39155923347472266,
        0.391443271386638,
        0.39153884264012995,
        0.38626553078379444,
        0.37993973056417246,
        0.38839011467903356,
        0.39119489152437864,
        0.3899734325382012,
        0.3975613419069324,
        0.4031748706817603,
        0.40650922820784285,
        0.40178319865802037,
        0.4041483840100976,
        0.40465787993875096,
        0.4052888249090503,
        0.3978471855774058,
        0.40532663928156565,
        0.4042707040769094,
        0.39561712275792205,
        0.3947013546603531,
        0.3936546303474588,
        0.3984466541895871,
        0.40303936024574916,
        0.4045064806934865,
        0.4087702215385585,
        0.4126753969022644,
        0.40803890812664484,
        0.41172603133685826,
        0.40719918746419964,
        0.40575090084679394,
        0.4030967284308249,
        0.4048585338282606,
        0.4058526770554015,
        0.40989820442085634,
        0.41156080649060883,
        0.4144054103926439,
        0.4242517641490022,
        0.43018423262736527,
        0.4534167149237453,
        0.44201921927368254,
        0.45418149878425196,
        0.4616268168429775,
        0.4664770482464353,
        0.5021030401662416,
        0.48336978891737825,
        0.474849587425198,
        0.479463333326564,
        0.48055703999837396,
        0.48793304783065267,
        0.4975467976700578,
        0.49093153367032744,
        0.4956334967663455,
        0.4848309964949347,
        0.491628467399573,
        0.483515080486474,
        0.4792072898397764,
        0.4741890328712821,
        0.4805336118935533,
        0.4820751307274347,
        0.4839927426191879,
        0.48764928740350433,
        0.4809649526198671,
        0.4536636402923025,
        0.5014246931918798,
        0.4957380771485577,
        0.4971826802375126,
        0.48722721484188436,
        0.4842173853476247
    ])
}
